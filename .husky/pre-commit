#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ›¡ï¸  Running development guard checks..."

# 1. TypeScript strict compilation
echo "ğŸ“ Checking TypeScript..."
npm run type-check || exit 1

# 2. Security pattern verification
echo "ğŸ”’ Verifying security patterns..."
node scripts/check-security-patterns.js || exit 1

# 3. Performance checks
echo "âš¡ Checking performance patterns..."
node scripts/check-performance-patterns.js || exit 1

# 4. Code quality checks
echo "âœ¨ Running quality checks..."
npm run lint || exit 1

# 5. Test coverage verification (if tests exist)
echo "ğŸ§ª Verifying test coverage..."
npm run test:coverage -- --passWithNoTests --silent || exit 1

echo "âœ… All pre-commit checks passed!"
