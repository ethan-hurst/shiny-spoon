#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🛡️  Running development guard checks..."

# 1. TypeScript strict compilation
echo "📝 Checking TypeScript..."
npm run type-check || exit 1

# 2. Security pattern verification
echo "🔒 Verifying security patterns..."
node scripts/check-security-patterns.js || exit 1

# 3. Performance checks
echo "⚡ Checking performance patterns..."
node scripts/check-performance-patterns.js || exit 1

# 4. Code quality checks
echo "✨ Running quality checks..."
npm run lint || exit 1

# 5. Test coverage verification (if tests exist)
echo "🧪 Verifying test coverage..."
npm run test:coverage -- --passWithNoTests --silent || exit 1

echo "✅ All pre-commit checks passed!"
